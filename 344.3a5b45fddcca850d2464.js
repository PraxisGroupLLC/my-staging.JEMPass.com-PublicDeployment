(self.webpackChunkjemPassAngularApp=self.webpackChunkjemPassAngularApp||[]).push([[344],{78344:function(t,e,n){"use strict";n.r(e),n.d(e,{VaultModule:function(){return L}});var r=n(61116),o=n(30719),a=n(10692),i=n(93820),s=n(97707),u=n(3492),l=n(19823),c=n(76659),d=n(17647),f=function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,s)}u((r=r.apply(t,e||[])).next())})},p=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function m(t,e){1&t&&i._uU(0," Title ")}function h(t,e){1&t&&i._uU(0),2&t&&i.hij(" ",e.row.title," ")}function g(t,e){1&t&&i._uU(0," Username/Email Address ")}function v(t,e){1&t&&i._uU(0),2&t&&i.hij(" ",e.row.username," ")}function b(t,e){1&t&&i._uU(0," Status ")}var Z=function(t,e,n){return{"badge-outline-success":t,"badge-outline-warning":e,"badge-outline-danger":n}};function y(t,e){if(1&t&&(i.TgZ(0,"div",15),i._uU(1),i.qZA()),2&t){var n=e.row;i.Q6J("ngClass",i.kEZ(2,Z,"encrypted"===n.status,"processing"===n.status,"decrypted"===n.status)),i.xp6(1),i.hij(" ",n.status," ")}}function w(t,e){1&t&&i._uU(0," Actions ")}var A=function(t){return["/vault/edit",t]};function T(t,e){if(1&t){var n=i.EpF();i.TgZ(0,"button",16),i._uU(1,"View"),i.qZA(),i.TgZ(2,"button",17),i.NdJ("click",function(){var t=i.CHM(n).row,e=i.oxw(2),r=i.MAs(16);return e.deleteItem(t.id,r)}),i._uU(3," Delete "),i.qZA()}2&t&&i.Q6J("routerLink",i.VKq(1,A,e.row.id))}function x(t,e){if(1&t&&(i.TgZ(0,"ngx-datatable",10),i.TgZ(1,"ngx-datatable-column"),i.YNc(2,m,1,0,"ng-template",11),i.YNc(3,h,1,1,"ng-template",12),i.qZA(),i.TgZ(4,"ngx-datatable-column"),i.YNc(5,g,1,0,"ng-template",11),i.YNc(6,v,1,1,"ng-template",12),i.qZA(),i.TgZ(7,"ngx-datatable-column",13),i.YNc(8,b,1,0,"ng-template",11),i.YNc(9,y,2,6,"ng-template",12),i.qZA(),i.TgZ(10,"ngx-datatable-column",14),i.YNc(11,w,1,0,"ng-template",11),i.YNc(12,T,4,3,"ng-template",12),i.qZA(),i.qZA()),2&t){var n=i.oxw();i.Udp("height",60*n.vault.length+60+"px"),i.Q6J("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",60)("scrollbarV",!0)("scrollbarH",!0)("rows",n.vault),i.xp6(7),i.Q6J("flexGrow",1),i.xp6(3),i.Q6J("width",120)}}function q(t,e){if(1&t){var n=i.EpF();i.TgZ(0,"div",18),i.TgZ(1,"h4",19),i._uU(2,"Are you sure?"),i.qZA(),i.TgZ(3,"button",20),i.NdJ("click",function(){return i.CHM(n).$implicit.dismiss("Cross click")}),i.TgZ(4,"span",21),i._uU(5,"\xd7"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"div",22),i.TgZ(7,"p"),i.TgZ(8,"strong"),i._uU(9,"You are about to delete this item. Are you absolutely sure?"),i.qZA(),i.qZA(),i.TgZ(10,"span",23),i._uU(11,"This operation can not be undone."),i.qZA(),i.qZA(),i.TgZ(12,"div",24),i.TgZ(13,"button",25),i.NdJ("click",function(){return i.CHM(n).$implicit.dismiss("cancel")}),i._uU(14,"Keep"),i.qZA(),i.TgZ(15,"button",26),i.NdJ("click",function(){return i.CHM(n).$implicit.close("Ok")}),i._uU(16,"Delete"),i.qZA(),i.qZA()}}var _=function(){return["/vault/new"]},C=function(){function t(t,e,n,r){this.modalService=t,this.toastr=e,this.jemService=n,this.auth=r}return t.prototype.ngOnInit=function(){return f(this,void 0,void 0,function(){return p(this,function(t){return[2]})})},t.prototype.loadVault=function(){return f(this,void 0,void 0,function(){var t,e,n,r=this;return p(this,function(o){switch(o.label){case 0:return t?[3,2]:[4,a.SodiumPlus.auto()];case 1:return e=o.sent(),[3,3];case 2:e=t,o.label=3;case 3:return t=e,n=[],[4,this.auth.getAllCredentials().subscribe(function(e){return f(r,void 0,void 0,function(){var r=this;return p(this,function(o){return e.forEach(function(e){return f(r,void 0,void 0,function(){var r,o,i,s,u;return p(this,function(l){switch(l.label){case 0:return r=JSON.parse(e.data),o=Buffer.from(r.metaKEK,"base64"),i=Buffer.from(r.metaData,"base64"),[4,t.crypto_aead_xchacha20poly1305_ietf_decrypt(o.slice(24),o.slice(0,24),a.CryptographyKey.from(this.auth.userSettings.metaKey))];case 1:return s=l.sent(),[4,t.crypto_aead_xchacha20poly1305_ietf_decrypt(i.slice(24),i.slice(0,24),a.CryptographyKey.from(s))];case 2:return u=l.sent(),u=JSON.parse(u),Buffer.from(r.passData,"base64"),n.push({id:e.RowKey,title:u.title,username:u.username,status:"encrypted"}),[2]}})})}),this.vault=n,[2]})})})];case 4:return o.sent(),[2]}})})},t.prototype.deleteItem=function(t,e){var n=this;this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0}).result.then(function(e){n.auth.deleteCredential(t).subscribe(function(t){n.toastr.success("Item Deleted!","Success!",{timeOut:3e3}),n.loadVault()})},function(t){})},t.\u0275fac=function(e){return new(e||t)(i.Y36(s.FF),i.Y36(u._W),i.Y36(l.v),i.Y36(c.e))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-vault-list"]],decls:17,vars:3,consts:[[1,"breadcrumb"],["href",""],[1,"separator-breadcrumb","border-top"],[1,"row","mb-3"],[1,"col-md-12","mb-3"],[1,"btn","btn-primary","float-right",3,"routerLink"],[1,"col-md-12"],[1,"card","o-hidden"],["style","box-shadow: none","class","material fullscreen",3,"height","columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","scrollbarH","rows",4,"ngIf"],["deleteConfirmModal",""],[1,"material","fullscreen",2,"box-shadow","none",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","scrollbarH","rows"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"flexGrow"],[3,"width"],[1,"badge","p-2","mr-1",3,"ngClass"],[1,"btn","btn-wide","btn-outline-secondary","mr-3",3,"routerLink"],[1,"btn","btn-outline-danger",3,"click"],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-danger"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary","btn-rounded",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-wide","btn-danger","btn-rounded",3,"click"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"h1"),i._uU(2,"Vault"),i.qZA(),i.TgZ(3,"ul"),i.TgZ(4,"li"),i.TgZ(5,"a",1),i._uU(6,"Logins"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i._UZ(7,"div",2),i.TgZ(8,"div",3),i.TgZ(9,"div",4),i.TgZ(10,"button",5),i._uU(11,"New"),i.qZA(),i.qZA(),i.TgZ(12,"div",6),i.TgZ(13,"div",7),i.YNc(14,x,13,11,"ngx-datatable",8),i.qZA(),i.qZA(),i.qZA(),i.YNc(15,q,17,0,"ng-template",null,9,i.W1O)),2&t&&(i.xp6(10),i.Q6J("routerLink",i.DdM(2,_)),i.xp6(4),i.Q6J("ngIf",null==e.vault?null:e.vault.length))},directives:[o.rH,r.O5,d.nE,d.UC,d.tk,d.vq,r.mk],styles:[""]}),t}(),U=n(11462),N=n(4764),k=function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,s)}u((r=r.apply(t,e||[])).next())})},J=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function S(t,e){if(1&t){var n=i.EpF();i.TgZ(0,"div",7),i.TgZ(1,"button",8),i.NdJ("click",function(){return i.CHM(n),i.oxw(2).viewMode="print"}),i._uU(2,"Cancel"),i.qZA(),i.TgZ(3,"btn-loading",9),i.NdJ("click",function(){return i.CHM(n),i.oxw(2).saveCredentials()}),i._uU(4,"Save"),i.qZA(),i.qZA()}if(2&t){var r=i.oxw(2);i.xp6(3),i.Q6J("loadingText",r.loadingText)("loading",r.loading)}}function E(t,e){if(1&t){var n=i.EpF();i.TgZ(0,"div",10),i.TgZ(1,"button",11),i._uU(2,"Back To Vault"),i.qZA(),i.TgZ(3,"button",12),i.NdJ("click",function(){return i.CHM(n),i.oxw(2).viewMode="edit"}),i._uU(4,"Edit"),i.qZA(),i.qZA()}}function I(t,e){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,S,5,2,"div",5),i.YNc(2,E,5,0,"div",6),i.qZA()),2&t){var n=i.oxw();i.xp6(1),i.Q6J("ngIf","edit"===n.viewMode),i.xp6(1),i.Q6J("ngIf","edit"!==n.viewMode)}}function F(t,e){if(1&t){var n=i.EpF();i.TgZ(0,"div",19),i._UZ(1,"span",20),i.TgZ(2,"button",21),i._uU(3,"Cancel"),i.qZA(),i.TgZ(4,"btn-loading",9),i.NdJ("click",function(){return i.CHM(n),i.oxw(2).saveCredentials()}),i._uU(5,"Save"),i.qZA(),i.qZA()}if(2&t){var r=i.oxw(2);i.xp6(4),i.Q6J("loadingText",r.loadingText)("loading",r.loading)}}function M(t,e){if(1&t){var n=i.EpF();i.TgZ(0,"div",22),i._UZ(1,"span",20),i.TgZ(2,"button",11),i._uU(3,"Back To Vault"),i.qZA(),i.TgZ(4,"button",12),i.NdJ("click",function(){return i.CHM(n),i.oxw(2).viewMode="edit"}),i._uU(5,"Edit"),i.qZA(),i.qZA()}}function K(t,e){if(1&t&&(i.TgZ(0,"div",13),i.TgZ(1,"div",14),i.TgZ(2,"h4",15),i._uU(3),i.qZA(),i.qZA(),i.TgZ(4,"div",16),i.YNc(5,F,6,2,"div",17),i.YNc(6,M,6,0,"div",18),i.qZA(),i.qZA()),2&t){var n=i.oxw();i.xp6(3),i.Oqu(n.vault.title),i.xp6(2),i.Q6J("ngIf","edit"===n.viewMode),i.xp6(1),i.Q6J("ngIf","edit"!==n.viewMode)}}function Y(t,e){if(1&t&&(i.TgZ(0,"div"),i.TgZ(1,"div",13),i.TgZ(2,"div",3),i.TgZ(3,"div",23),i.TgZ(4,"div",24),i.TgZ(5,"form",25),i.TgZ(6,"div",26),i.TgZ(7,"div",27),i._uU(8,"Item Details"),i.qZA(),i.qZA(),i.TgZ(9,"div",13),i.TgZ(10,"div",28),i.TgZ(11,"label",29),i._uU(12,"Title"),i.qZA(),i._UZ(13,"input",30),i.qZA(),i.TgZ(14,"div",28),i.TgZ(15,"label",31),i._uU(16,"Website/Domain"),i.qZA(),i._UZ(17,"input",32),i.qZA(),i.TgZ(18,"div",28),i.TgZ(19,"label",33),i._uU(20,"Username"),i.qZA(),i._UZ(21,"input",34),i.qZA(),i.TgZ(22,"div",28),i.TgZ(23,"label",35),i._uU(24,"Password"),i.qZA(),i._UZ(25,"input",36),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t){var n=i.oxw();i.xp6(5),i.Q6J("formGroup",n.vaultForm),i.xp6(8),i.s9C("value",n.vault.title),i.xp6(4),i.s9C("value",n.vault.url),i.xp6(4),i.s9C("value",n.vault.username),i.xp6(4),i.s9C("value",n.vault.status)}}function H(t,e){if(1&t){var n=i.EpF();i.TgZ(0,"span",44),i.NdJ("click",function(){i.CHM(n);var t=i.oxw().index;return i.oxw(2).showPasswordGenerator[t]=!0}),i._uU(1,"Generate New Password"),i.qZA()}}function D(t,e){if(1&t){var n=i.EpF();i.TgZ(0,"span",44),i.NdJ("click",function(){i.CHM(n);var t=i.oxw().index;return i.oxw(2).showPasswordGenerator[t]=!1}),i._uU(1,"Done - Hide"),i.qZA()}}function Q(t,e){if(1&t){var n=i.EpF();i.TgZ(0,"div",45),i.TgZ(1,"div",46),i.TgZ(2,"div",47),i._uU(3,"Password Length"),i.qZA(),i.TgZ(4,"div",48),i._UZ(5,"input",49),i.TgZ(6,"div"),i._uU(7),i.qZA(),i.qZA(),i.qZA(),i.TgZ(8,"div",50),i.TgZ(9,"div",51),i._uU(10,"Password Contains:"),i.qZA(),i.TgZ(11,"div",52),i.TgZ(12,"div",53),i.TgZ(13,"div"),i._uU(14,"Uppercase char"),i.qZA(),i._UZ(15,"input",54),i.qZA(),i.TgZ(16,"div"),i._uU(17,"..."),i.qZA(),i.TgZ(18,"div",53),i.TgZ(19,"div"),i._uU(20,"Lowercase char"),i.qZA(),i._UZ(21,"input",55),i.qZA(),i.qZA(),i.TgZ(22,"div",52),i.TgZ(23,"div"),i._uU(24," Numbers "),i._UZ(25,"input",56),i.qZA(),i.TgZ(26,"div"),i._uU(27,"..."),i.qZA(),i.TgZ(28,"div"),i._uU(29," Symbols "),i._UZ(30,"input",57),i.qZA(),i.qZA(),i.TgZ(31,"div",51),i.TgZ(32,"button",58),i.NdJ("click",function(){i.CHM(n);var t=i.oxw().index;return i.oxw(2).random_str(t)}),i._uU(33," Generate Password "),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&t){var r=i.oxw().$implicit;i.xp6(7),i.hij("",r.value.length," chars")}}function j(t,e){if(1&t&&(i.TgZ(0,"div"),i.TgZ(1,"form",25),i.TgZ(2,"div",3),i.TgZ(3,"div",23),i.TgZ(4,"div",24),i.TgZ(5,"div",26),i.TgZ(6,"div",27),i._uU(7,"New Credential Details"),i.qZA(),i.qZA(),i.TgZ(8,"div",13),i.TgZ(9,"div",28),i.TgZ(10,"label",29),i._uU(11,"Title"),i.qZA(),i._UZ(12,"input",38),i.qZA(),i.TgZ(13,"div",28),i.TgZ(14,"label",31),i._uU(15,"Website/Domain"),i.qZA(),i._UZ(16,"input",39),i.qZA(),i.TgZ(17,"div",28),i.TgZ(18,"label",33),i._uU(19,"Username"),i.qZA(),i._UZ(20,"input",40),i.qZA(),i.TgZ(21,"div",28),i.TgZ(22,"label",35),i._uU(23,"Password"),i.qZA(),i._UZ(24,"input",41),i.qZA(),i.TgZ(25,"div",28),i._uU(26," \xa0 "),i.qZA(),i.TgZ(27,"div",28),i.YNc(28,H,2,0,"span",42),i.YNc(29,D,2,0,"span",42),i.YNc(30,Q,34,1,"div",43),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t){var n=e.$implicit,r=e.index,o=i.oxw(2);i.xp6(1),i.Q6J("formGroup",n),i.xp6(11),i.s9C("value",n.title),i.xp6(4),i.s9C("value",n.url),i.xp6(4),i.s9C("value",n.username),i.xp6(4),i.s9C("value",n.password),i.xp6(4),i.Q6J("ngIf",!o.showPasswordGenerator[r]),i.xp6(1),i.Q6J("ngIf",o.showPasswordGenerator[r]),i.xp6(1),i.Q6J("ngIf",o.showPasswordGenerator[r])}}function P(t,e){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,j,31,8,"div",37),i.qZA()),2&t){var n=i.oxw();i.xp6(1),i.Q6J("ngForOf",n.vaultForms)}}var O=function(){function t(t,e,n,r,o,a){this.route=t,this.router=e,this.fb=n,this.auth=r,this.jemService=o,this.toastr=a,this.vault={},this.vaultForm={},this.vaultForms=[],this.loading=!1,this.CHARACTER_SETS=[["Numbers","0123456789"],["Lowercase","abcdefghijklmnopqrstuvwxyz"],["Uppercase","ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["ASCII symbols","!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~"]],this.showPasswordGenerator=[]}return t.prototype.ngOnInit=function(){var t=this;this.formIndex=0,this.id=this.route.snapshot.params.id,this.isNew=!this.id,this.isNew&&(this.viewMode="edit"),this.buildVaultForms(this.formIndex,this.vault),this.id&&(this.viewMode="print",this.auth.getCredential(this.id).subscribe(function(e){return k(t,void 0,void 0,function(){var t,n,r,o,i,s,u;return J(this,function(l){switch(l.label){case 0:return t?[3,2]:[4,a.SodiumPlus.auto()];case 1:return n=l.sent(),[3,3];case 2:n=t,l.label=3;case 3:return t=n,r=JSON.parse(e.data),o=Buffer.from(r.metaKEK,"base64"),i=Buffer.from(r.metaData,"base64"),[4,t.crypto_aead_xchacha20poly1305_ietf_decrypt(o.slice(24),o.slice(0,24),a.CryptographyKey.from(this.auth.userSettings.metaKey))];case 4:return s=l.sent(),[4,t.crypto_aead_xchacha20poly1305_ietf_decrypt(i.slice(24),i.slice(0,24),a.CryptographyKey.from(s))];case 5:return u=l.sent(),u=JSON.parse(u),this.vault={id:e.RowKey,title:u.title,url:u.url,username:u.username,status:"encrypted"},[2]}})})}))},t.prototype.isMobile=function(){return window.innerWidth<600},t.prototype.buildVaultForms=function(t,e){void 0===e&&(e={}),this.vaultForms[t]=this.fb.group({id:[e.id],title:[e.title],url:[e.url],username:[e.username],password:[e.password],length:14,numbers:1,uppercase:1,lowercase:1,specialchars:1}),this.showPasswordGenerator[t]=!1},t.prototype.addEmptyVaultForm=function(){this.formIndex++,this.buildVaultForms(this.formIndex,{})},t.prototype.createItem=function(t){return void 0===t&&(t={}),this.fb.group({title:[t.title],url:[t.url],username:[t.username],password:[t.password]})},t.prototype.saveItem=function(t,e){return void 0===e&&(e=!0),k(this,void 0,void 0,function(){var n=this;return J(this,function(r){return[2,new Promise(function(r,o){return k(n,void 0,void 0,function(){var n,i,s,u,l,c,d,f,p,m,h=this;return J(this,function(g){switch(g.label){case 0:return this.loading=!0,this.loadingText="Touch your JEM...",n?[3,2]:[4,a.SodiumPlus.auto()];case 1:return i=g.sent(),[3,3];case 2:i=n,g.label=3;case 3:return[4,(n=i).randombytes_buf(32)];case 4:return s=g.sent(),[4,n.randombytes_buf(32)];case 5:return u=g.sent(),l={metaKEK:"",passKEK:"",type:1,metaData:{title:t.title,username:t.username,url:t.url},passData:{password:t.password}},[4,n.randombytes_buf(24)];case 6:return f=g.sent(),c=l,[4,n.crypto_aead_xchacha20poly1305_ietf_encrypt(JSON.stringify(l.metaData),f,a.CryptographyKey.from(s))];case 7:return c.metaData=g.sent(),l.metaData=Buffer.concat([f,l.metaData]),l.metaData=l.metaData.toString("base64"),[4,n.randombytes_buf(24)];case 8:return f=g.sent(),d=l,[4,n.crypto_aead_xchacha20poly1305_ietf_encrypt(JSON.stringify(l.passData),f,a.CryptographyKey.from(u))];case 9:return d.passData=g.sent(),l.passData=Buffer.concat([f,l.passData]),l.passData=l.passData.toString("base64"),[4,n.randombytes_buf(24)];case 10:return f=g.sent(),p=l,[4,n.crypto_aead_xchacha20poly1305_ietf_encrypt(s,f,a.CryptographyKey.from(this.auth.userSettings.metaKey))];case 11:p.metaKEK=g.sent(),l.metaKEK=Buffer.concat([f,l.metaKEK]),l.metaKEK=l.metaKEK.toString("base64"),g.label=12;case 12:return g.trys.push([12,14,,15]),[4,this.jemService.encrypt(u,this.auth.deviceSettings,e).then(function(t){l.passKEK=t})];case 13:return g.sent(),[3,15];case 14:return m=g.sent(),this.loading=!1,this.toastr.error(m.message,"Error",{timeOut:5e3,closeButton:!0,progressBar:!0}),[2,o()];case 15:return[4,this.auth.addCredential(l).subscribe(function(t){h.toastr.success("Saved item!","Success!",{timeOut:3e3}),r("")})];case 16:return g.sent(),[2]}})})})]})})},t.prototype.saveCredentials=function(){return k(this,void 0,void 0,function(){var t,e;return J(this,function(n){switch(n.label){case 0:t=0,n.label=1;case 1:if(!(t<this.vaultForms.length))return[3,6];e=this.vaultForms[t].value,n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.saveItem(e,!(t<this.vaultForms.length-1))];case 3:case 4:return n.sent(),[3,5];case 5:return t++,[3,1];case 6:return[4,this.router.navigateByUrl("/dashboard/v2")];case 7:return n.sent(),[2]}})})},t.prototype.getRandomInt=function(t,e){return k(this,void 0,void 0,function(){var n,r,o,i;return J(this,function(s){switch(s.label){case 0:return n?[3,2]:[4,a.SodiumPlus.auto()];case 1:return r=s.sent(),[3,3];case 2:r=n,s.label=3;case 3:return[4,(n=r).randombytes_buf(1)];case 4:return o=s.sent(),i=e-t+1,o[0]>=Math.floor(256/i)*i?[2,this.getRandomInt(t,e)]:[2,t+o[0]%i]}})})},t.prototype.doCopy=function(t){var e=document.createElement("textarea");e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0",e.value=this.vaultForms[t].value.password,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.toastr.success("The password is in your clipboard!","Success!",{timeOut:5e3})},t.prototype.random_str=function(t){return k(this,void 0,void 0,function(){var e,n,r,o,a,i,s,u;return J(this,function(l){switch(l.label){case 0:e=[],n=this.vaultForms[t].value.length,r="",r=1==this.vaultForms[t].value.numbers?this.CHARACTER_SETS[0][1]:"",r+=1==this.vaultForms[t].value.lowercase?this.CHARACTER_SETS[1][1]:"",r+=1==this.vaultForms[t].value.uppercase?this.CHARACTER_SETS[2][1]:"",o=(r+=1==this.vaultForms[t].value.specialchars?this.CHARACTER_SETS[3][1]:"").length-1,a=0,l.label=1;case 1:return a<n?(s=(i=e).push,u=r,[4,this.getRandomInt(0,o)]):[3,4];case 2:s.apply(i,[u[l.sent()]]),l.label=3;case 3:return++a,[3,1];case 4:return this.vaultForms[t].patchValue({password:e.join("")}),[2]}})})},t.\u0275fac=function(e){return new(e||t)(i.Y36(o.gz),i.Y36(o.F0),i.Y36(U.qu),i.Y36(c.e),i.Y36(l.v),i.Y36(u._W))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-invoice-detail"]],decls:8,vars:4,consts:[[4,"ngIf"],[1,"card-body","justify-content-between"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"btn","btn-outline-secondary",3,"click"],["class","d-flex mb-5 col-lg-12 justify-content-between",4,"ngIf"],["class","d-flex mb-5 col-xs-12 justify-content-between",4,"ngIf"],[1,"d-flex","mb-5","col-lg-12","justify-content-between"],[1,"btn","btn-outline-secondary","mr-3",3,"click"],["btnClass","btn-primary",3,"loadingText","loading","click"],[1,"d-flex","mb-5","col-xs-12","justify-content-between"],["routerLink","/dashboard/v2",1,"btn","btn-outline-secondary","mr-3","mb-sm-0","mb-3"],[1,"btn","btn-outline-secondary","mr-3","mb-sm-0","mb-3",3,"click"],[1,"row"],[1,"col-md-6"],[1,"font-weight-bold"],[1,"col-md-6","text-right"],["class","d-flex mb-5",4,"ngIf"],["class","d-sm-flex mb-5",4,"ngIf"],[1,"d-flex","mb-5"],[1,"m-auto"],["routerLink","/dashboard/v2",1,"btn","btn-outline-secondary","mr-3"],[1,"d-sm-flex","mb-5"],[1,"card","mb-4"],[1,"card-body"],[3,"formGroup"],[1,"row","card-body","justify-content-between"],[1,"card-title","mb-3"],[1,"col-md-6","form-group","mb-3"],["for","title"],["formControlName","title","type","text","id","title","readonly","",1,"form-control",2,"font-weight","bold",3,"value"],["for","url"],["formControlName","url","type","text","id","url","readonly","",1,"form-control",2,"font-weight","bold",3,"value"],["for","username"],["formControlName","username","type","text","id","username","readonly","",1,"form-control",2,"font-weight","bold",3,"value"],["for","password"],["formControlName","password","type","text","id","password","readonly","",1,"form-control",2,"font-weight","bold",3,"value"],[4,"ngFor","ngForOf"],["formControlName","title","type","text","id","title","placeholder","Enter descriptive title here",1,"form-control",2,"font-weight","bold",3,"value"],["formControlName","url","type","text","id","url","formControlName","url","placeholder","Enter the domain of the website here, e.g., example.com",1,"form-control",2,"font-weight","bold",3,"value"],["formControlName","username","type","text","id","username","formControlName","username","placeholder","Enter your username for this website here",1,"form-control",2,"font-weight","bold",3,"value"],["formControlName","password","type","text","id","password","formControlName","password","placeholder","Enter your current password for this website here",1,"form-control",2,"font-weight","bold",3,"value"],["class","text-muted",3,"click",4,"ngIf"],["class","mb-3",4,"ngIf"],[1,"text-muted",3,"click"],[1,"mb-3"],[1,"d-flex","justify-content-between","align-items-center","pt-1","mt-2"],[1,""],[1,"d-flex","justify-content-between","align-items-center"],["type","range","min","8","max","42","value","14","formControlName","length",1,"mr-2"],["id","passwordConfigurator"],[1,"pt-3"],[1,"d-flex","justify-content-between","pt-2"],[1,"d-flex","align-items-center"],["type","checkbox","checked","","name","uppercase","formControlName","uppercase",1,"ml-4"],["type","checkbox","checked","","name","lowercase","formControlName","lowercase",1,"ml-4"],["type","checkbox","checked","","name","numbers","formControlName","numbers",1,"ml-4"],["type","checkbox","checked","","name","specialchars","formControlName","specialchars",1,"ml-4"],[1,"btn","btn-rounded","btn-secondary","btn-block",3,"click"]],template:function(t,e){1&t&&(i.YNc(0,I,3,2,"div",0),i.TgZ(1,"div",1),i.YNc(2,K,7,3,"div",2),i.YNc(3,Y,26,5,"div",0),i.YNc(4,P,2,1,"div",0),i.TgZ(5,"div",3),i.TgZ(6,"button",4),i.NdJ("click",function(){return e.addEmptyVaultForm()}),i._uU(7,"+1"),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.Q6J("ngIf",e.isMobile()),i.xp6(2),i.Q6J("ngIf",!e.isMobile()),i.xp6(1),i.Q6J("ngIf","edit"!==e.viewMode),i.xp6(1),i.Q6J("ngIf","edit"===e.viewMode))},directives:[r.O5,N.a,o.rH,U._Y,U.JL,U.sg,U.Fj,U.JJ,U.u,r.sg,U.eT,U.Wl],styles:[""]}),t}(),B=n(5967),V=[{path:"",canActivate:[B.i],component:C},{path:"new",canActivate:[B.i],component:O},{path:"edit/:id",canActivate:[B.i],component:O}],G=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[o.Bz.forChild(V)],o.Bz]}),t}(),R=n(11585),L=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[r.ez,U.u5,d.xD,U.UX,R.q,s.IJ,G]]}),t}()}}]);